{"ast":null,"code":"// src/components/OtpModal.js\nimport React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'./OtpStyles.css';// Import the CSS file\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OtpModal=_ref=>{let{userId,username,userType,onClose}=_ref;const[otp,setOtp]=useState(['','','','','','']);const navigate=useNavigate();const handleOtpChange=(index,value)=>{const newOtp=[...otp];newOtp[index]=value;setOtp(newOtp);// Move focus to next input\nif(value&&index<otp.length-1){document.getElementById(`otp-${index+1}`).focus();}};const handleVerifyOtp=async()=>{const otpString=otp.join('');try{const response=await axios.post('https://instareact-9vx0.onrender.com/api/auth/verify-otp',{userId,otp:otpString});localStorage.setItem('token',response.data.token);// Save JWT token\nlocalStorage.setItem('userId',userId);// Save user ID\nlocalStorage.setItem('username',username);// Save username\nconsole.log('otp res',response);localStorage.setItem('userType',response.data.userType);navigate('/dashboard');// Redirect to dashboard\n}catch(error){alert('Invalid OTP');}};return/*#__PURE__*/_jsx(\"div\",{className:\"otp-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"otp-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:onClose,children:\"X\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"otp-title\",children:\"Enter OTP\"}),/*#__PURE__*/_jsx(\"p\",{className:\"otp-description\",children:\"Please enter the 6-digit one-time password sent to your phone.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"otp-inputs\",children:otp.map((value,index)=>/*#__PURE__*/_jsx(\"input\",{id:`otp-${index}`,type:\"text\",maxLength:\"1\",value:value,onChange:e=>handleOtpChange(index,e.target.value),className:\"otp-input\"},index))}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button bg-purple-900\",onClick:handleVerifyOtp,children:\"Verify OTP\"})]})});};export default OtpModal;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","OtpModal","_ref","userId","username","userType","onClose","otp","setOtp","navigate","handleOtpChange","index","value","newOtp","length","document","getElementById","focus","handleVerifyOtp","otpString","join","response","post","localStorage","setItem","data","token","console","log","error","alert","className","children","onClick","map","id","type","maxLength","onChange","e","target"],"sources":["C:/Users/Admin/Documents/frontend/src/components/OtpModal.js"],"sourcesContent":["// src/components/OtpModal.js\r\nimport React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './OtpStyles.css'; // Import the CSS file\r\n\r\nconst OtpModal = ({ userId, username, userType, onClose }) => {\r\n    const [otp, setOtp] = useState(['', '', '', '', '', '']);\r\n    const navigate = useNavigate();\r\n\r\n    const handleOtpChange = (index, value) => {\r\n        const newOtp = [...otp];\r\n        newOtp[index] = value;\r\n        setOtp(newOtp);\r\n\r\n        // Move focus to next input\r\n        if (value && index < otp.length - 1) {\r\n            document.getElementById(`otp-${index + 1}`).focus();\r\n        }\r\n    };\r\n\r\n    const handleVerifyOtp = async () => {\r\n        const otpString = otp.join('');\r\n        try {\r\n            const response = await axios.post('https://instareact-9vx0.onrender.com/api/auth/verify-otp', { userId, otp: otpString });\r\n            localStorage.setItem('token', response.data.token); // Save JWT token\r\n            localStorage.setItem('userId', userId); // Save user ID\r\n            localStorage.setItem('username', username); // Save username\r\n            console.log('otp res',response)\r\n            localStorage.setItem('userType', response.data.userType);\r\n            navigate('/dashboard'); // Redirect to dashboard\r\n        } catch (error) {\r\n            alert('Invalid OTP');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"otp-modal\">\r\n            <div className=\"otp-container\">\r\n                <button className=\"close-button\" onClick={onClose}>X</button>\r\n                <h2 className=\"otp-title\">Enter OTP</h2>\r\n                <p className=\"otp-description\">Please enter the 6-digit one-time password sent to your phone.</p>\r\n                <div className=\"otp-inputs\">\r\n                    {otp.map((value, index) => (\r\n                        <input\r\n                            key={index}\r\n                            id={`otp-${index}`}\r\n                            type=\"text\"\r\n                            maxLength=\"1\"\r\n                            value={value}\r\n                            onChange={(e) => handleOtpChange(index, e.target.value)}\r\n                            className=\"otp-input\"\r\n                        />\r\n                    ))}\r\n                </div>\r\n                <button className=\"submit-button bg-purple-900\" onClick={handleVerifyOtp}>Verify OTP</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OtpModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}